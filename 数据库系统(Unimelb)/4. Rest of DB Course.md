# $\text{Rest of DB Course}$ 

除了$\text{Normalization}$外，都是一堆零碎知识点

# $\text{1. Normalization}$

> ## $\text{1.1. Normalization}$​定义
>
> > **1️⃣**定义
> >
> > |                          |                  操作                  |                       目的                        |
> > | :----------------------: | :------------------------------------: | :-----------------------------------------------: |
> > |  $\text{Normalization}$  | 一大表格$\xrightarrow{拆分}$若干小表格 | 去除$\text{Redundancies}$从而避免$\text{Anomoly}$ |
> > | $\text{Denormalization}$ | 一大表格$\xleftarrow{拼接}$若干小表格  |              避免频繁的$\text{Join}$              |
> >
> > ⚠️$\text{Fully Normalized = Eliminate All Anomalies}$，一般到$\text{4NF}$才算完全归一化
> >
> > **2️⃣**示例
> >
> > 1. 标准化前
> >
> >    | $\text{StuID}$ | $\text{SName}$ | $\text{CID}$ |  $\text{CName}$  |
> >    | :------------: | :------------: | :----------: | :--------------: |
> >    |   $\text{1}$   | $\text{John}$  | $\text{101}$ |  $\text{Math}$   |
> >    |   $\text{2}$   | $\text{Mary}$  | $\text{102}$ | $\text{English}$ |
> >    |   $\text{1}$   | $\text{John}$  | $\text{103}$ | $\text{Physics}$ |
> >    |   $\text{3}$   | $\text{Peter}$ | $\text{101}$ |  $\text{Math}$   |
> >    |   $\text{2}$   | $\text{Mary}$  | $\text{103}$ | $\text{Physics}$ |
> >
> > 2. 标准化后
> >
> >    | $\small\text{学生表}$ | $\small\text{StuID}$ | $\small\text{SName}$ | $\small\text{课程表}$ | $\small\text{CID}$ |  $\small\text{CName}$  | $\small\text{学生-课程表}$ | $\small\text{StuID}$ | $\small\text{CID}$ |
> >    | :-------------------: | :------------------: | :------------------: | :-------------------: | :----------------: | :--------------------: | :------------------------: | :------------------: | :----------------: |
> >    |      $\text{\\}$      |      $\text{1}$      | $\small\text{John}$  |      $\text{\\}$      |    $\text{101}$    |  $\small\text{Math}$   |        $\text{\\}$         |      $\text{1}$      |    $\text{101}$    |
> >    |      $\text{\\}$      |      $\text{2}$      | $\small\text{Mary}$  |      $\text{\\}$      |    $\text{102}$    | $\small\text{English}$ |        $\text{\\}$         |      $\text{2}$      |    $\text{102}$    |
> >    |      $\text{\\}$      |      $\text{1}$      | $\small\text{John}$  |      $\text{\\}$      |    $\text{103}$    | $\small\text{Physics}$ |        $\text{\\}$         |      $\text{1}$      |    $\text{103}$    |
> >    |      $\text{\\}$      |      $\text{3}$      | $\small\text{Peter}$ |      $\text{\\}$      |    $\text{101}$    |  $\small\text{Math}$   |        $\text{\\}$         |      $\text{3}$      |    $\text{101}$    |
> >    |      $\text{\\}$      |      $\text{2}$      | $\small\text{Mary}$  |      $\text{\\}$      |    $\text{103}$    | $\small\text{Physics}$ |        $\text{\\}$         |      $\text{2}$      |    $\text{103}$    |
> >
> > **3️⃣**关于$\text{Normalization}$是否能加快查询的速度
> >
> > |                      | $\text{Normalization}$ |  $\text{Denormalization}$   |
> > | :------------------: | :--------------------: | :-------------------------: |
> > |       表格模式       |     $\text{A, B}$      | $\text{A}\bowtie{}\text{B}$ |
> > | 查询速度(查询一个表) |           快           |             慢              |
> > | 查询速度(查询两个表) |           慢           |             快              |
>
> ## $\text{1.2. Database Anomalies}$​异常
>
> > **1️⃣**概述：期末会给你表格，让你用文字描述举例三种$\text{Anomaly}$​ 
> >
> > 1. 示例表格
> >
> >    | $\text{Order(PFK)}$ | $\text{Item(PFK)}$ |  $\text{Desc}$  | $\text{Qty}$ |
> >    | :-----------------: | :----------------: | :-------------: | :----------: |
> >    |     $\text{27}$     |    $\text{873}$    |  $\text{nut}$   |  $\text{2}$  |
> >    |     $\text{28}$     |    $\text{873}$    |  $\text{nut}$   | $\text{10}$  |
> >    |     $\text{30}$     |    $\text{495}$    | $\text{washer}$ | $\text{50}$  |
> >
> > 2. 基本概念
> >
> >    |  $\text{Anomaly}$  |              含义              | 示例(下表)                                                   |
> >    | :----------------: | :----------------------------: | :----------------------------------------------------------- |
> >    | $\text{Insertion}$ | 插入数据$\text{→}$插入其他数据 | 插入$\text{Item/Desc}\xrightarrow{还需}$插入$\text{Order/Qty}$ |
> >    | $\text{Deletion}$  | 删除数据$\text{→}$删除其他数据 | 删除$\text{Order30}\xrightarrow{引起}$整行删除               |
> >    |  $\text{Update}$   | 更新数据$\text{→}$更新其他数据 | 更新$\text{Item873}$的$\text{Desc}\xrightarrow[有两处\text{Item873}]{引起}$两处$\text{Desc}$更新 |
> >
> > **2️⃣**用$\text{NULL}$来解决$\text{Anomaly:}$ 不能根本解决
> >
> > 1. $\text{Insertion Anomaly}$可能可以，原因在于$\text{PK}$是不能$\text{NULL}$的
> >    - 可以的示例：插入$\text{Order/Item/Desc}\to{}\text{Qty}$为$\text{NULL}$ 
> >    - 不可以的示例：插入$\text{Item/Desc}\to{}\text{Qty}$为$\text{NULL/}\text{Order}$不能为$\text{NULL}$​ 
> > 2. $\text{Deletion Anomaly:}$  同理可能可以，当删除的数据不是$\text{PK}$时，可考虑设为$\text{NULL}$ 
> > 3. $\text{Update Anomaly:}$ 绝对没戏，不可能更新成$\text{NULL}$ 
>
> ## $\text{1.3. Functional Dependencies}$​ 
>
> > **1️⃣**概述
> >
> > 1. 定义：$\text{A set of attributes X determines another set of attributes Y uniquely}$ 
> > 2. 符号：$\text{X}\to{}\text{Y}$表示如果知道$\text{X}$就知道$\text{Y}$，比如$\text{Stu}\to{}\text{Stu-Name}$​ 
> > 3. 性质：
> >    - 依赖恒等式：$\text{X}\to{}\text{X}$ ，$\text{PK}\to{}\text{All Column}$​ 
> >    - 拆分原则$\text{: AB}\to{}\text{CD}\begin{cases}可以拆分为\text{: AB}\to{}\text{C + }\text{AB}\to{}\text{D}\\\\不可拆分为\text{: A}\to{}\text{CD + }\text{B}\to{}\text{CD}\end{cases}\to{}只有右侧可拆分$​ 
> >
> > **2️⃣**有关概念：以$\text{A}(\underline{\text{X}}, \underline{\text{Y}}, \text{Z}, \text{D})$为例
> >
> > 1. $\text{Determinants:}$ 
> >
> >    - 箭头左侧的属性，比如$\underline{\text{X}} ,\underline{\text{Y}}\to{}\text{Z}$中的$\text{XY}$
> >    - 至于这其中$\text{Z}$是什么就无具体说法
> >
> > 2. $\text{Key/Non-Key}$属性：包含/不包含$\text{PK}$的属性，比如
> >
> >    |       属性类型       |                        含义                        |                     示例                     |
> >    | :------------------: | :------------------------------------------------: | :------------------------------------------: |
> >    |   $\text{Key}$属性   | 包含$\text{PK}$的属性，或者说是$\text{PK}$的一部分 | $\underline{\text{X}} ,\underline{\text{Y}}$ |
> >    | $\text{Non-Key}$属性 |                      其余属性                      |             $\text{Z} ,\text{D}$             |
> >
> > 3. 两种$\text{Dependency}$​​  
> >
> >    |                依赖类型                |                             含义                             |                 示例                 |
> >    | :------------------------------------: | :----------------------------------------------------------: | :----------------------------------: |
> >    | $\text{Partial Functional Dependency}$ | $\text{Key}$属性($\text{PK}$的一部分)$\xrightarrow{决定}\text{Non-Key}$属性 | $\underline{\text{Y}} \to{}\text{Z}$ |
> >    | $\text{Transitive Dependency}$(传递性) |  $\text{Non-Key}$属性$\xrightarrow{决定}\text{Non-Key}$属性  |       $\text{Z} \to{}\text{D}$       |
> >
> > **3️⃣**$\text{Armstrong’s Axioms}$(公理)
> >
> > |       $\text{Axioms}$       |                             条件                             | $\Rightarrow$ |               结果                |                 备注                  |
> > | :-------------------------: | :----------------------------------------------------------: | :-----------: | :-------------------------------: | :-----------------------------------: |
> > |    $\text{Reflexivity}$     |                $\text{B}\subseteq\text{A}$                | $\Rightarrow$ |  $\text{A} \rightarrow \text{B}$  | 或者说$\text{A}\text{B}\to{}\text{A}$ |
> > | $\text{Augmentation}$(扩展) |               $\text{A}\rightarrow\text{B}$               | $\Rightarrow$ | $\text{AC} \rightarrow \text{BC}$ |             $\text{N/A}$              |
> > |     $\text{Transitive}$     | $\text{A} \rightarrow \text{B }\land{}\text{ B}\rightarrow \text{C}$ | $\Rightarrow$ |  $\text{A} \rightarrow \text{C}$  |             $\text{N/A}$              |
>
> ## $\text{1.4. Normal Form}$ 